<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>線上分數兌換表管理系統</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>🏆</text></svg>">
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header no-print">
            <div class="container">
                <h1>🏆 線上分數兌換表管理系統</h1>
                <div class="header-actions">
                    <button class="btn btn--primary" id="addRangeBtn">
                        📝 新增分數區間
                    </button>
                    <button class="btn btn--success" id="addItemBtn">
                        ➕ 新增物品
                    </button>
                    <button class="btn btn--secondary" id="printBtn">
                        🖨️ 列印兌換表
                    </button>
                    <button class="btn btn--outline" id="exportDataBtn">
                        💾 匯出資料
                    </button>
                    <button class="btn btn--outline" id="importDataBtn">
                        📥 匯入資料
                    </button>
                    <input type="file" id="importFileInput" accept=".json" style="display: none;">
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content" id="editMode">
            <div class="container">
                <!-- Control Panel -->
                <div class="control-panel no-print">
                    <div class="panel-section">
                        <h3>系統設定</h3>
                        <div class="settings-grid">
                            <div class="setting-item">
                                <label for="systemTitle">系統標題：</label>
                                <input type="text" id="systemTitle" value="ACS分數兌換表" class="form-input">
                            </div>
                            <div class="setting-item">
                                <label for="organizationName">機構名稱：</label>
                                <input type="text" id="organizationName" value="" placeholder="可選填" class="form-input">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Score Ranges Container -->
                <div id="scoreRangesContainer" class="score-ranges-container">
                    <!-- Dynamic content will be inserted here -->
                </div>

                <!-- Empty State -->
                <div class="empty-state" id="emptyState">
                    <div class="empty-state-content">
                        <h3>🎯 開始建立您的分數兌換表</h3>
                        <p>點擊「新增分數區間」來建立第一個分數範圍，然後添加物品！</p>
                    </div>
                </div>
            </div>
        </main>

        <!-- Print Mode -->
        <div class="print-content hidden" id="printMode">
            <div class="print-header">
                <h1 id="printTitle">ACS分數兌換表</h1>
                <div class="print-org" id="printOrg"></div>
                <div class="print-date">列印日期：<span id="printDate"></span></div>
            </div>
            <div id="printContainer">
                <!-- Print content will be generated here -->
            </div>
        </div>
    </div>

    <!-- Add/Edit Range Modal -->
    <div class="modal hidden" id="rangeModal">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="rangeModalTitle">新增分數區間</h3>
                <button class="modal-close" id="rangeModalClose">&times;</button>
            </div>
            <div class="modal-body">
                <form id="rangeForm">
                    <div class="form-group">
                        <label for="rangeName">區間名稱：</label>
                        <input type="text" id="rangeName" class="form-input" placeholder="例：低分區" required>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="rangeMin">最小分數：</label>
                            <input type="number" id="rangeMin" class="form-input" min="0" required>
                        </div>
                        <div class="form-group">
                            <label for="rangeMax">最大分數：</label>
                            <input type="number" id="rangeMax" class="form-input" min="0" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="rangeColor">區間顏色：</label>
                        <select id="rangeColor" class="form-input">
                            <option value="green">綠色</option>
                            <option value="blue">藍色</option>
                            <option value="orange">橙色</option>
                            <option value="red">紅色</option>
                            <option value="purple">紫色</option>
                            <option value="teal">青綠色</option>
                        </select>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn--outline" id="rangeCancel">取消</button>
                <button type="submit" class="btn btn--primary" form="rangeForm">確定</button>
            </div>
        </div>
    </div>

    <!-- Add/Edit Item Modal -->
    <div class="modal hidden" id="itemModal">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="itemModalTitle">新增物品</h3>
                <button class="modal-close" id="itemModalClose">&times;</button>
            </div>
            <div class="modal-body">
                <form id="itemForm">
                    <div class="form-group">
                        <label for="itemName">物品名稱：</label>
                        <input type="text" id="itemName" class="form-input" placeholder="輸入物品名稱" required>
                    </div>
                    <div class="form-group">
                        <label for="itemPoints">所需分數：</label>
                        <input type="number" id="itemPoints" class="form-input" min="0" placeholder="輸入所需分數" required>
                    </div>
                    <div class="form-group">
                        <label for="itemDescription">物品描述：</label>
                        <textarea id="itemDescription" class="form-input" placeholder="可選填物品描述" rows="3"></textarea>
                    </div>
                    <div class="form-group">
                        <label>物品圖片：</label>
                        <div class="image-upload" id="imageUpload">
                            <div class="upload-placeholder">
                                <span>🖼️ 點擊上傳圖片或拖拽到此處</span>
                                <input type="file" id="itemImage" accept="image/*" style="display: none;">
                            </div>
                        </div>
                        <div class="image-preview hidden" id="imagePreview">
                            <img id="previewImg" alt="預覽">
                            <button type="button" class="remove-image" id="removeImage">&times;</button>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn--outline" id="itemCancel">取消</button>
                <button type="submit" class="btn btn--primary" form="itemForm">確定</button>
            </div>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div class="modal hidden" id="deleteModal">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">確認刪除</h3>
            </div>
            <div class="modal-body">
                <p id="deleteMessage">確定要刪除這個項目嗎？此操作無法復原。</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn--outline" id="deleteCancel">取消</button>
                <button type="button" class="btn btn--danger" id="deleteConfirm">確定刪除</button>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast hidden" id="toast">
        <span class="toast-message" id="toastMessage"></span>
    </div>

    <script src="app.js"></script>
</body>
</html>